"use strict";(self.webpackChunkdocumentation_v_2=self.webpackChunkdocumentation_v_2||[]).push([[6604],{89212:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"api/10 Event","title":"API v2 \u2014 Events (schema.org/Event) & Addresses (schema.org/PostalAddress)","description":"Semantic API v2 (schema.org) for events and postal addresses.","source":"@site/docs/api/10 Event.md","sourceDirName":"api","slug":"/api/events","permalink":"/fr/docs/api/events","draft":false,"unlisted":false,"editUrl":"https://github.com/TiBillet/documentation_v2/tree/main/docs/api/10 Event.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"slug":"events","title":"API v2 \u2014 Events (schema.org/Event) & Addresses (schema.org/PostalAddress)","description":"Semantic API v2 (schema.org) for events and postal addresses.","keywords":["schema.org","open data","api","event","postaladdress","json-ld"],"authors":"jonas"},"sidebar":"tutorialSidebar","previous":{"title":"Produits","permalink":"/fr/docs/api/products"},"next":{"title":"R\xe9servations et billets","permalink":"/fr/docs/api/reservations"}}');var i=n(74848),r=n(28453);const d={sidebar_position:10,slug:"events",title:"API v2 \u2014 Events (schema.org/Event) & Addresses (schema.org/PostalAddress)",description:"Semantic API v2 (schema.org) for events and postal addresses.",keywords:["schema.org","open data","api","event","postaladdress","json-ld"],authors:"jonas"},l=void 0,a={},o=[{value:"Aper\xe7u",id:"aper\xe7u",level:2},{value:"Ressource Event \u2014 schema.org/Event",id:"ressource-event--schemaorgevent",level:2},{value:"Endpoints",id:"endpoints",level:3},{value:"Champs principaux (schema.org)",id:"champs-principaux-schemaorg",level:3},{value:"Exemple \u2014 cr\xe9ation minimale",id:"exemple--cr\xe9ation-minimale",level:3},{value:"Exemple \u2014 cr\xe9ation \xe9tendue (capacit\xe9, statut, tags, r\xe8gles d\u2019offre, etc.)",id:"exemple--cr\xe9ation-\xe9tendue-capacit\xe9-statut-tags-r\xe8gles-doffre-etc",level:3},{value:"Lister (GET /events/)",id:"lister-get-events",level:3},{value:"D\xe9tail (GET /events/uuid/)",id:"d\xe9tail-get-eventsuuid",level:3},{value:"Supprimer (DELETE /events/uuid/)",id:"supprimer-delete-eventsuuid",level:3},{value:"Lier une adresse (POST /events/event_uuid/link-address/)",id:"lier-une-adresse-post-eventsevent_uuidlink-address",level:3},{value:"Ressource PostalAddress \u2014 schema.org/PostalAddress",id:"ressource-postaladdress--schemaorgpostaladdress",level:2},{value:"Endpoints",id:"endpoints-1",level:3},{value:"Exemple \u2014 cr\xe9ation",id:"exemple--cr\xe9ation",level:3},{value:"Liste (GET /postal-addresses/)",id:"liste-get-postal-addresses",level:3},{value:"Notes d\u2019impl\xe9mentation &amp; mapping",id:"notes-dimpl\xe9mentation--mapping",level:2},{value:"Tests (Poetry)",id:"tests-poetry",level:2}];function c(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsxs)(s.p,{children:["Cette page documente la nouvelle API v2 s\xe9mantique. Elle remplace l\u2019ancienne API h\xe9rit\xe9e. Les exemples ci\u2011dessous utilisent les noms de propri\xe9t\xe9s de ",(0,i.jsx)(s.a,{href:"https://schema.org",children:"schema.org"}),"."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"aper\xe7u",children:"Aper\xe7u"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Base path (tenant): ",(0,i.jsx)(s.code,{children:"/api/v2/"})]}),"\n",(0,i.jsxs)(s.li,{children:["Authentification: en-t\xeate ",(0,i.jsx)(s.code,{children:"Authorization: Api-Key <votre_cl\xe9>"})]}),"\n",(0,i.jsx)(s.li,{children:"Format de r\xe9ponse: JSON (schema.org\u2011like, proche JSON\u2011LD)"}),"\n",(0,i.jsxs)(s.li,{children:["Tests: ",(0,i.jsx)(s.code,{children:"poetry run pytest -q tests/pytest"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"ressource-event--schemaorgevent",children:"Ressource Event \u2014 schema.org/Event"}),"\n",(0,i.jsx)(s.h3,{id:"endpoints",children:"Endpoints"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/v2/events/"})," \u2014 liste des \xe9v\xe8nements publi\xe9s","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Retour non pagin\xe9: ",(0,i.jsx)(s.code,{children:'{ "results": [Event, ...] }'})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/v2/events/<uuid>/"})," \u2014 d\xe9tail d\u2019un \xe9v\xe8nement"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"DELETE /api/v2/events/<uuid>/"})," \u2014 suppression d\u2019un \xe9v\xe8nement"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /api/v2/events/<uuid>/link-address/"})," \u2014 lier une adresse postale","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Corps: ",(0,i.jsx)(s.code,{children:'{ "postalAddressId": <int> }'})," ou un objet ",(0,i.jsx)(s.code,{children:"PostalAddress"})," (voir plus bas)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"champs-principaux-schemaorg",children:"Champs principaux (schema.org)"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Requis \xe0 la cr\xe9ation: ",(0,i.jsx)(s.code,{children:"name"}),", ",(0,i.jsx)(s.code,{children:"startDate"})]}),"\n",(0,i.jsxs)(s.li,{children:["Recommand\xe9s/optionnels: ",(0,i.jsx)(s.code,{children:"endDate"}),", ",(0,i.jsx)(s.code,{children:"maximumAttendeeCapacity"}),", ",(0,i.jsx)(s.code,{children:"disambiguatingDescription"}),", ",(0,i.jsx)(s.code,{children:"description"}),", ",(0,i.jsx)(s.code,{children:"eventStatus"}),", ",(0,i.jsx)(s.code,{children:"audience"}),", ",(0,i.jsx)(s.code,{children:"keywords"}),", ",(0,i.jsx)(s.code,{children:"url"}),", ",(0,i.jsx)(s.code,{children:"sameAs"}),", ",(0,i.jsx)(s.code,{children:"offers"}),", ",(0,i.jsx)(s.code,{children:"additionalProperty"})]}),"\n",(0,i.jsxs)(s.li,{children:["Cat\xe9gorie s\xe9mantique:","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"@type"})," (sous\u2011type schema.org, ex: ",(0,i.jsx)(s.code,{children:"MusicEvent"}),") \u2013 mapp\xe9 vers la cat\xe9gorie interne"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"additionalType"})," (libell\xe9 humain, ex: ",(0,i.jsx)(s.code,{children:"Concert"}),", ",(0,i.jsx)(s.code,{children:"Festival"}),", ",(0,i.jsx)(s.code,{children:"Volunteering"}),") \u2013 mapp\xe9 vers la cat\xe9gorie interne"]}),"\n",(0,i.jsxs)(s.li,{children:["R\xe8gle: si la cat\xe9gorie r\xe9solue est ",(0,i.jsx)(s.strong,{children:"ACTION"})," (Volunteering), alors ",(0,i.jsx)(s.code,{children:"superEvent"})," est ",(0,i.jsx)(s.strong,{children:"obligatoire"})," (UUID de l\u2019\xe9v\xe8nement parent)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"exemple--cr\xe9ation-minimale",children:"Exemple \u2014 cr\xe9ation minimale"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"POST /api/v2/events/\nAuthorization: Api-Key <cl\xe9>\nContent-Type: application/json\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@context": "https://schema.org",\n  "@type": "Event",\n  "name": "API v2 \u2014 Test create",\n  "startDate": "2025-12-20T19:00:00Z"\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:"R\xe9ponse (201):"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@context": "https://schema.org",\n  "@type": "Event",\n  "identifier": "<uuid>",\n  "name": "API v2 \u2014 Test create",\n  "startDate": "2025-12-20T19:00:00Z",\n  "eventStatus": "https://schema.org/EventScheduled"\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"exemple--cr\xe9ation-\xe9tendue-capacit\xe9-statut-tags-r\xe8gles-doffre-etc",children:"Exemple \u2014 cr\xe9ation \xe9tendue (capacit\xe9, statut, tags, r\xe8gles d\u2019offre, etc.)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@context": "https://schema.org",\n  "@type": "Event",\n  "name": "Concert",\n  "startDate": "2025-12-20T19:00:00Z",\n  "maximumAttendeeCapacity": 250,\n  "disambiguatingDescription": "Soir\xe9e funk",\n  "description": "Une soir\xe9e funk m\xe9morable",\n  "eventStatus": "https://schema.org/EventScheduled",\n  "audience": {"@type":"Audience","audienceType":"private"},\n  "keywords": ["Funk","Live"],\n  "sameAs": "https://example.org/external-event",\n  "offers": {\n    "eligibleQuantity": {"maxValue": 4},\n    "returnPolicy": {"merchantReturnDays": 7}\n  },\n  "additionalProperty": [\n    {"@type":"PropertyValue","name":"optionsRadio","value":["Salle"]},\n    {"@type":"PropertyValue","name":"customConfirmationMessage","value":"Merci pour votre r\xe9servation !"}\n  ]\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"lister-get-events",children:"Lister (GET /events/)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"GET /api/v2/events/\nAuthorization: Api-Key <cl\xe9>\n"})}),"\n",(0,i.jsx)(s.p,{children:"R\xe9ponse (200):"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "results": [\n    {\n      "@context": "https://schema.org",\n      "@type": "Event",\n      "identifier": "<uuid>",\n      "name": "Concert",\n      "startDate": "2025-12-20T19:00:00Z",\n      "maximumAttendeeCapacity": 250,\n      "eventStatus": "https://schema.org/EventScheduled",\n      "keywords": ["Funk","Live"],\n      "offers": {\n        "@type": "Offer",\n        "eligibleQuantity": {"@type":"QuantitativeValue","maxValue": 4},\n        "returnPolicy": {"@type":"MerchantReturnPolicy","merchantReturnDays": 7}\n      }\n    }\n  ]\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"d\xe9tail-get-eventsuuid",children:"D\xe9tail (GET /events/uuid/)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"GET /api/v2/events/<uuid>/\nAuthorization: Api-Key <cl\xe9>\n"})}),"\n",(0,i.jsx)(s.p,{children:"R\xe9ponse (200):"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@context": "https://schema.org",\n  "@type": "Event",\n  "identifier": "<uuid>",\n  "name": "Concert",\n  "startDate": "2025-12-20T19:00:00Z",\n  "location": {\n    "@type": "Place",\n    "address": {"@type":"PostalAddress", "streetAddress": "7 S. Broadway", "addressLocality": "Denver", "postalCode": "80209", "addressCountry": "US"}\n  }\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"supprimer-delete-eventsuuid",children:"Supprimer (DELETE /events/uuid/)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"DELETE /api/v2/events/<uuid>/\nAuthorization: Api-Key <cl\xe9>\n"})}),"\n",(0,i.jsxs)(s.p,{children:["R\xe9ponse: ",(0,i.jsx)(s.code,{children:"204 No Content"})]}),"\n",(0,i.jsx)(s.h3,{id:"lier-une-adresse-post-eventsevent_uuidlink-address",children:"Lier une adresse (POST /events/event_uuid/link-address/)"}),"\n",(0,i.jsx)(s.p,{children:"Deux possibilit\xe9s:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"Lier une adresse existante par id"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{ "postalAddressId": 123 }\n'})}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsx)(s.li,{children:"Cr\xe9er & lier en une fois avec un objet PostalAddress"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@type": "PostalAddress",\n  "streetAddress": "42 Avenue des Tests",\n  "addressLocality": "DevCity",\n  "addressRegion": "DC",\n  "postalCode": "42424",\n  "addressCountry": "FR",\n  "geo": {"latitude": 48.8566, "longitude": 2.3522}\n}\n'})}),"\n",(0,i.jsxs)(s.p,{children:["R\xe9ponse (200): l\u2019Event mis \xe0 jour avec ",(0,i.jsx)(s.code,{children:"location.address"}),"."]}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"ressource-postaladdress--schemaorgpostaladdress",children:"Ressource PostalAddress \u2014 schema.org/PostalAddress"}),"\n",(0,i.jsx)(s.h3,{id:"endpoints-1",children:"Endpoints"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/v2/postal-addresses/"})," \u2014 lister (retour ",(0,i.jsx)(s.code,{children:'{ "results": [...] }'}),")"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"GET /api/v2/postal-addresses/{id}/"})," \u2014 d\xe9tail par id (interne)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"POST /api/v2/postal-addresses/"})," \u2014 cr\xe9er une adresse"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"DELETE /api/v2/postal-addresses/{id}/"})," \u2014 supprimer une adresse"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"exemple--cr\xe9ation",children:"Exemple \u2014 cr\xe9ation"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"POST /api/v2/postal-addresses/\nAuthorization: Api-Key <cl\xe9>\nContent-Type: application/json\n"})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@type": "PostalAddress",\n  "name": "Test Address",\n  "streetAddress": "123 Rue de Test",\n  "addressLocality": "Testville",\n  "addressRegion": "TV",\n  "postalCode": "99999",\n  "addressCountry": "FR",\n  "geo": {"latitude": 43.7, "longitude": 7.25}\n}\n'})}),"\n",(0,i.jsx)(s.p,{children:"R\xe9ponse (201):"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{\n  "@type": "PostalAddress",\n  "streetAddress": "123 Rue de Test",\n  "addressLocality": "Testville",\n  "addressRegion": "TV",\n  "postalCode": "99999",\n  "addressCountry": "FR",\n  "geo": {"@type":"GeoCoordinates","latitude": 43.7, "longitude": 7.25}\n}\n'})}),"\n",(0,i.jsx)(s.h3,{id:"liste-get-postal-addresses",children:"Liste (GET /postal-addresses/)"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"GET /api/v2/postal-addresses/\nAuthorization: Api-Key <cl\xe9>\n"})}),"\n",(0,i.jsx)(s.p,{children:"R\xe9ponse (200):"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'{ "results": [ {"@type":"PostalAddress","streetAddress":"123 Rue de Test", "addressLocality":"Testville"} ] }\n'})}),"\n",(0,i.jsx)(s.hr,{}),"\n",(0,i.jsx)(s.h2,{id:"notes-dimpl\xe9mentation--mapping",children:"Notes d\u2019impl\xe9mentation & mapping"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"maximumAttendeeCapacity"})," \u2194\ufe0e capacit\xe9 (jauge)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"offers.eligibleQuantity.maxValue"})," \u2194\ufe0e ",(0,i.jsx)(s.code,{children:"max_per_user"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"disambiguatingDescription"})," \u2194\ufe0e ",(0,i.jsx)(s.code,{children:"short_description"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"description"})," \u2194\ufe0e ",(0,i.jsx)(s.code,{children:"long_description"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"sameAs"}),"/",(0,i.jsx)(s.code,{children:"url"})," \u2194\ufe0e ",(0,i.jsx)(s.code,{children:"full_url"})," (si ",(0,i.jsx)(s.code,{children:"sameAs"})," pr\xe9sent \u21d2 \xe9v\xe8nement \xab externe \xbb)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"eventStatus"}),": ",(0,i.jsx)(s.code,{children:"EventScheduled"})," si publi\xe9, ",(0,i.jsx)(s.code,{children:"EventCancelled"})," sinon"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"audience"}),": ",(0,i.jsx)(s.code,{children:'{audienceType:"private"}'})," si \xe9v\xe8nement priv\xe9"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"keywords"})," \u2194\ufe0e tags (cr\xe9\xe9s si absents)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"additionalProperty"}),":","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"optionsRadio"})," / ",(0,i.jsx)(s.code,{children:"optionsCheckbox"})," (listes de noms d\u2019options)"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"customConfirmationMessage"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"tests-poetry",children:"Tests (Poetry)"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Installer: ",(0,i.jsx)(s.code,{children:"poetry install"})]}),"\n",(0,i.jsxs)(s.li,{children:["Lancer: ",(0,i.jsx)(s.code,{children:"poetry run pytest -q tests/pytest"})]}),"\n",(0,i.jsx)(s.li,{children:"L\u2019ordre des tests Event est forc\xe9: create \u2192 list \u2192 retrieve \u2192 link \u2192 delete."}),"\n"]}),"\n",(0,i.jsxs)(s.admonition,{type:"caution",children:[(0,i.jsx)(s.p,{children:"La documentation est en cours de r\xe9daction."}),(0,i.jsxs)(s.p,{children:["N'h\xe9sitez pas \xe0 venir discuter avec nous sur ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"https://discord.gg/7FJvtYx",children:"Discord"})})," pour avoir plus d'informations !"]})]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>d,x:()=>l});var t=n(96540);const i={},r=t.createContext(i);function d(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);