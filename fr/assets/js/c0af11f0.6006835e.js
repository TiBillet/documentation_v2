"use strict";(self.webpackChunkdocumentation_v_2=self.webpackChunkdocumentation_v_2||[]).push([[639],{4791:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"contribute/dev","title":"D\xe9veloppement","description":"Vous voulez aider au d\xe9veloppement de TiBillet? Merci! C\'est gr\xe2ce aux gens comme vous que l\'open-source fonctionne \ud83d\ude4f","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/contribute/dev.md","sourceDirName":"contribute","slug":"/contribute/development","permalink":"/fr/docs/contribute/development","draft":false,"unlisted":false,"editUrl":"https://github.com/TiBillet/documentation_v2/tree/main/docs/contribute/dev.md","tags":[{"inline":true,"label":"contribuer","permalink":"/fr/docs/tags/contribuer"},{"inline":true,"label":"open source","permalink":"/fr/docs/tags/open-source"},{"inline":true,"label":"git","permalink":"/fr/docs/tags/git"},{"inline":true,"label":"soutien","permalink":"/fr/docs/tags/soutien"},{"inline":true,"label":"tdd","permalink":"/fr/docs/tags/tdd"},{"inline":true,"label":"python","permalink":"/fr/docs/tags/python"},{"inline":true,"label":"django","permalink":"/fr/docs/tags/django"},{"inline":true,"label":"docker","permalink":"/fr/docs/tags/docker"},{"inline":true,"label":"poetry","permalink":"/fr/docs/tags/poetry"}],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"slug":"development","title":"D\xe9veloppement","keywords":["contribuer","b\xe9n\xe9volat","open source","git","pull request","issue","soutien","code","d\xe9veloppement","programmation","python","django","docker","poetry","tests","tdd"],"tags":["contribuer","open source","git","soutien","tdd","python","django","docker","poetry"],"authors":"kaya, guillaume"},"sidebar":"tutorialSidebar","previous":{"title":"Contributing","permalink":"/fr/docs/category/contributing"},"next":{"title":"Research","permalink":"/fr/docs/category/research"}}');var d=s(4848),i=s(8453);const t={sidebar_position:1,slug:"development",title:"D\xe9veloppement",keywords:["contribuer","b\xe9n\xe9volat","open source","git","pull request","issue","soutien","code","d\xe9veloppement","programmation","python","django","docker","poetry","tests","tdd"],tags:["contribuer","open source","git","soutien","tdd","python","django","docker","poetry"],authors:"kaya, guillaume"},l="D\xe9veloppement",o={},c=[{value:"M\xe9thodes de travail",id:"m\xe9thodes-de-travail",level:2},{value:"Outils et langages utilis\xe9s",id:"outils-et-langages-utilis\xe9s",level:2},{value:"Installation locale simple",id:"installation-locale-simple",level:2},{value:"Installation locale d\xe9taill\xe9e",id:"installation-locale-detaillee",level:2},{value:"G\xe9n\xe9ration des cl\xe9s",id:"g\xe9n\xe9ration-des-cl\xe9s",level:3},{value:"Fedow, Lespass, LaBoutik",id:"fedow-lespass-laboutik",level:3},{value:"Environnement Fedow",id:"environnement-fedow",level:4},{value:"Environnement Lespass",id:"environnement-lespass",level:4},{value:"Environnement LaBoutik",id:"environnement-laboutik",level:4},{value:"Le dossier Test Driven Development",id:"le-dossier-test-driven-development",level:3},{value:"D\xe9marrage des moteurs",id:"d\xe9marrage-des-moteurs",level:2},{value:"\xc7a tourne ?",id:"\xe7a-tourne-",level:3},{value:"Cycle de vie",id:"cycle-de-vie",level:2},{value:"Mises \xe0 jour",id:"mises-\xe0-jour",level:3},{value:"Tests",id:"tests",level:3},{value:"Sauvegardes",id:"sauvegardes",level:3}];function a(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"d\xe9veloppement",children:"D\xe9veloppement"})}),"\n",(0,d.jsx)(n.p,{children:"Vous voulez aider au d\xe9veloppement de TiBillet? Merci! C'est gr\xe2ce aux gens comme vous que l'open-source fonctionne \ud83d\ude4f"}),"\n",(0,d.jsxs)(n.p,{children:["Premi\xe8rement, si vous n'avez pas une t\xe2che pr\xe9cise en t\xeate, allez voir les tickets ouverts sur les ",(0,d.jsx)(n.a,{href:"https://github.com/orgs/TiBillet/projects?query=is%3Aopen",children:"d\xe9p\xf4ts Github"})," officiels."]}),"\n",(0,d.jsx)(n.p,{children:"C'est le moyen le plus simple de comprendre quels sont les probl\xe8mes \xe0 r\xe9soudre et quelles fonctionnalit\xe9s sont demand\xe9es."}),"\n",(0,d.jsxs)(n.admonition,{title:"Les d\xe9p\xf4ts",type:"note",children:[(0,d.jsx)(n.p,{children:'Les d\xe9p\xf4ts \xe9pingl\xe9s ("Pinned") sur la page de l\'organisation devraient suffire. Si vous avez des doutes sur les r\xf4les respectifs de Fedow, LaBoutik ou Lespass, r\xe9visez les bases sur les trois moteurs de TiBillet.'}),(0,d.jsxs)(n.p,{children:[(0,d.jsx)("mark",{children:"TODO: lien doc vers les moteurs et leur r\xf4le"})," (une page dans pr\xe9sentation probablement)"]})]}),"\n",(0,d.jsx)(n.h2,{id:"m\xe9thodes-de-travail",children:"M\xe9thodes de travail"}),"\n",(0,d.jsxs)(n.p,{children:["Quand on travaille avec des ",(0,d.jsx)(n.em,{children:"forges Git"})," comme Github, il y a des fa\xe7ons d'aider qui rendent votre contribution plus facile \xe0 prendre en compte :"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Si vous ne faites pas partie de l'organisation (avec les acc\xe8s au d\xe9p\xf4t), faites un ",(0,d.jsx)(n.em,{children:"fork"})," (d\xe9doublement) du d\xe9p\xf4t qui vous int\xe9resse, travaillez \xe0 partir de celui-ci et soumettez vous modifications par le biais d'une ",(0,d.jsx)(n.em,{children:"pull request"})," (demande de fusion)."]}),"\n",(0,d.jsx)(n.li,{children:"Si vous avez un ticket sur lequel vous souhaitez travailler, v\xe9rifiez s'il n'existe pas d\xe9j\xe0. Si c'est le cas, rejoignez la discussion plut\xf4t que de faire la m\xeame chose en parall\xe8le!"}),"\n",(0,d.jsxs)(n.li,{children:["Quand vous d\xe9marrez le travail sur un ticket, ",(0,d.jsx)(n.strong,{children:"assignez-vous"})," dessus pour informer les autres qu'un chantier est en cours."]}),"\n",(0,d.jsxs)(n.li,{children:["Enfin, un point important: ",(0,d.jsx)(n.strong,{children:"ne cr\xe9ez pas de demandes de fusion sans avoir fait tourner les tests"})," ! \xc7a arrive aux meilleur\u22c5es d'entre nous. Id\xe9alement, vous devriez les faire tourner avant chaque ",(0,d.jsx)(n.em,{children:"commit"}),", avec l'aide d'un ",(0,d.jsx)(n.em,{children:"git hook"})," (d\xe9clencheur automatique) par exemple."]}),"\n"]}),"\n",(0,d.jsx)(n.admonition,{title:"Trouver de l'aide",type:"note",children:(0,d.jsxs)(n.p,{children:["Si  vous avez des questions sur Git, Github, ou un aspect du d\xe9veloppement, rejoignez-nous sur le serveur ",(0,d.jsx)(n.a,{href:"https://discord.gg/7FJvtYx",children:"Discord"})," ou ",(0,d.jsx)(n.a,{href:"https://matrix.to/#/#tibillet:tiers-lieux.org",children:"Matrix"}),". Nous ferons de notre mieux pour aider !"]})}),"\n",(0,d.jsx)(n.h2,{id:"outils-et-langages-utilis\xe9s",children:"Outils et langages utilis\xe9s"}),"\n",(0,d.jsx)(n.p,{children:"TiBillet, c'est :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["une suite d'applications ",(0,d.jsx)(n.a,{href:"https://www.python.org/",children:"Python"}),","]}),"\n",(0,d.jsxs)(n.li,{children:["d\xe9velopp\xe9es avec l'aide du framework ",(0,d.jsx)(n.a,{href:"https://www.djangoproject.com/",children:"Django"}),","]}),"\n",(0,d.jsxs)(n.li,{children:["ses d\xe9pendances sont g\xe9r\xe9es avec ",(0,d.jsx)(n.a,{href:"https://python-poetry.org/",children:"Poetry"}),","]}),"\n",(0,d.jsxs)(n.li,{children:["le tout tournant dans des conteneurs ",(0,d.jsx)(n.a,{href:"https://www.docker.com/",children:"Docker"})," en production comme en d\xe9veloppement."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Si vous ne vous sentez pas \xe0 l'aise avec la pile logicielle, la meilleure chose \xe0 faire est d'aller chercher des tutoriels. Avec un peu de chance on compilera notre propre liste de ressources ici un de ces jours \ud83d\ude05"}),"\n",(0,d.jsx)(n.admonition,{title:"Attention",type:"warning",children:(0,d.jsx)(n.p,{children:"En particulier, des connaissances de bases avec Git feront une diff\xe9rence. C'est assez facile de semer le chaos dans un d\xe9p\xf4t quand on ne comprend pas comment le versionnage marche. Il y a des s\xe9curit\xe9s en place, mais vous pourriez avoir beaucoup plus de difficult\xe9s que n\xe9cessaire! Je dis \xe7a par exp\xe9rience \ud83d\ude11"})}),"\n",(0,d.jsx)(n.h2,{id:"installation-locale-simple",children:"Installation locale simple"}),"\n",(0,d.jsx)(n.p,{children:"Pour coder et tester votre code, vous allez avoir besoin d'une instance (\xe0 peu pr\xe8s) fonctionnelle de TiBillet sur votre ordinateur."}),"\n",(0,d.jsx)(n.p,{children:"V\xe9rifions que vous avez l'outillage requis sous la main. Vous avez besoin de :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Docker CLI et l'extension ",(0,d.jsx)(n.code,{children:"docker-compose"}),". S'installe super facilement ",(0,d.jsx)(n.a,{href:"https://docs.docker.com/engine/install/ubuntu/#install-using-the-convenience-script",children:"ici"})]}),"\n",(0,d.jsx)(n.li,{children:(0,d.jsx)(n.code,{children:"git"})}),"\n",(0,d.jsx)(n.li,{children:"un compte Github avec une cl\xe9 SSH enregistr\xe9e (pour un acc\xe8s authentifi\xe9 \xe0 la forge),"}),"\n",(0,d.jsx)(n.li,{children:"un IDE (environnement de d\xe9veloppement). Des coupons pour PyCharm sot disponibles sur demande, mais un IDE g\xe9n\xe9raliste comme VSCodium fonctionne assez bien - c'est ce que j'utilise \ud83d\ude09."}),"\n"]}),"\n",(0,d.jsxs)(n.admonition,{type:"info",children:[(0,d.jsx)(n.p,{children:"A partir de la, vous avez le choix entre deux chemins :"}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["Le chemin ",(0,d.jsx)(n.strong,{children:"Trop facile !"})," : ",(0,d.jsx)(n.a,{href:"https://nuage.tierslieux.re/s/rprGfbDDDrazJ9d",children:"je t\xe9l\xe9charge une archive"})," dans laquelle tout est d\xe9ja install\xe9 et je peux passer directement au ",(0,d.jsx)(n.a,{href:"#d%C3%A9marrage-des-moteurs",children:"d\xe9marrage des moteurs"}),"."]}),"\n",(0,d.jsxs)(n.li,{children:["Le chemin ",(0,d.jsx)(n.strong,{children:"Je veux comprendre !"})," : Chaque \xe9tape pour cr\xe9er son environnement est d\xe9taill\xe9e dans le ",(0,d.jsx)(n.a,{href:"#installation-locale-detaillee",children:"tuto ci dessous"}),"."]}),"\n"]}),(0,d.jsx)(n.p,{children:"Vous pouvez m\xeame faire les deux, pour un effet maximal !"})]}),"\n",(0,d.jsx)(n.h2,{id:"installation-locale-detaillee",children:"Installation locale d\xe9taill\xe9e"}),"\n",(0,d.jsx)(n.p,{children:"On va commencer en cr\xe9ant un dossier qui contiendra les diff\xe9rents d\xe9p\xf4ts requis \xe0 sa racine, dans votre dossier de travail par exemple. \xc7a ressemblera \xe0 :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"tibillet-dev\n\u251c\u2500\u2500 Fedow\n\u251c\u2500\u2500 LaBoutik\n\u251c\u2500\u2500 Lespass\n\u251c\u2500\u2500 Test-Driven-Development\n\u2514\u2500\u2500 Traefik\n"})}),"\n",(0,d.jsx)(n.h3,{id:"g\xe9n\xe9ration-des-cl\xe9s",children:"G\xe9n\xe9ration des cl\xe9s"}),"\n",(0,d.jsx)("mark",{children:"TODO: \xe0 simplifier ? lourd et compliqu\xe9 pour aucune raison valable"}),"\n",(0,d.jsxs)(n.p,{children:["Pour g\xe9n\xe9rer les cl\xe9s n\xe9cessaires \xe0 la configuration des moteurs, \xe0 l'heure actuelle, on ",(0,d.jsx)(n.em,{children:"pull"})," l'image Docker de la version production de Fedow, puis on lance quelques commandes dans l'environnement de Poetry."]}),"\n",(0,d.jsx)(n.p,{children:"Pour chaque moteur, on aura besoin :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["d'une ou deux cl\xe9s Fernet (pour le champ ",(0,d.jsx)(n.code,{children:"FERNET_KEY"})," et possiblement des mots de passe),"]}),"\n",(0,d.jsxs)(n.li,{children:["d'une cl\xe9 secr\xe8te Django (pour le champ ",(0,d.jsx)(n.code,{children:"SECRET_KEY"}),")."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Vous pouvez g\xe9n\xe9rer 30 cl\xe9s uniques de chaque type en lan\xe7ant les commandes :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"docker run --rm tibillet/fedow poetry run python3 -c \"from cryptography.fernet import Fernet; print('\\n'.join([Fernet.generate_key().decode('utf-8') for i in range(0,30)]))\"\ndocker run --rm tibillet/fedow poetry run python3 -c \"from django.core.management.utils import get_random_secret_key; print('\\n'.join([get_random_secret_key() for i in range(0,30)]))\"\n"})}),"\n",(0,d.jsx)(n.p,{children:"La premi\xe8re commande prendra quelques minutes, vu qu'elle t\xe9l\xe9charge une image Docker. Gardez les cl\xe9s quelque part, on s'en servira au moment de la mise en place des moteurs."}),"\n",(0,d.jsxs)(n.p,{children:["On aura \xe9galement besoin d'une cl\xe9 de test Stripe pour le champ ",(0,d.jsx)(n.code,{children:"STRIPE_KEY_TEST"}),". Stripe est actuellement la solution de paiement qui se charge de la conversion cash en cashless. Une cl\xe9 de test peut \xeatre obtenue en se cr\xe9ant un compte gratuit, puis and allant dans le Mode test -> Cl\xe9 API de test. Alternativement, demandez \xe0 l'\xe9quipe."]}),"\n",(0,d.jsx)(n.h3,{id:"fedow-lespass-laboutik",children:"Fedow, Lespass, LaBoutik"}),"\n",(0,d.jsx)(n.p,{children:"D\xe9marrons en clonant les d\xe9p\xf4ts des diff\xe9rents moteurs :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="tibillet-dev$"',children:"git clone git@github.com:TiBillet/Fedow.git\ngit clone git@github.com:TiBillet/Lespass.git\ngit clone git@github.com:TiBillet/LaBoutik.git\n"})}),"\n",(0,d.jsx)(n.p,{children:"\xc0 partir de l\xe0, on a besoin d'\xe9crire un peu de configuration. \xc7a sera plus simple \xe0 l'avenir, prenez patience \ud83d\ude0b"}),"\n",(0,d.jsxs)(n.p,{children:["Chaque moteur a besoin de son propre fichier ",(0,d.jsx)(n.code,{children:".env"}),", que vous pouvez baser sur les fichiers ",(0,d.jsx)(n.code,{children:"env_example"})," qu'on vient de cloner."]}),"\n",(0,d.jsx)(n.admonition,{title:"Attention",type:"warning",children:(0,d.jsxs)(n.p,{children:["Toute variable d'environnement, doit \xeatre trouvable dans le fichier ",(0,d.jsx)(n.code,{children:".env"}),". Pas de suppression de variable ! Elle peut par contre suivant les cas rester vide (nullable)."]})}),"\n",(0,d.jsx)(n.h4,{id:"environnement-fedow",children:"Environnement Fedow"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="tibillet-dev$"',children:"cp Fedow/env_example Fedow/.env\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Nom"}),(0,d.jsx)(n.th,{children:"Environnement cible"}),(0,d.jsx)(n.th,{children:"Nullable"}),(0,d.jsx)(n.th,{children:"Valeur par d\xe9faut"}),(0,d.jsx)(n.th,{children:"Notes"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SECRET_KEY"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Une des cl\xe9s secr\xe8tes Django g\xe9n\xe9r\xe9es pr\xe9c\xe9demment"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FERNET_KEY"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Une des cl\xe9s Fernet g\xe9n\xe9r\xe9es pr\xe9c\xe9demment"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_KEY"})}),(0,d.jsx)(n.td,{children:"Production"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Cl\xe9 API de votre compte Stripe"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DOMAIN"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"fedow.tibillet.localhost"})}),(0,d.jsx)(n.td,{children:"\xc0 adapter \xe0 votre nom de domaine et sous-domaine en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_KEY_TEST"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Cl\xe9 API de test de votre compte Stripe"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_TEST"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsxs)(n.td,{children:["Passer \xe0 1 si ",(0,d.jsx)(n.code,{children:"STRIPE_KEY_TEST"})," est rempli"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_ENDPOINT_SECRET_TEST"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Aucune id\xe9e"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DEBUG"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour le d\xe9veloppement"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TEST"})}),(0,d.jsx)(n.td,{children:"Tests"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour les tests"})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"environnement-lespass",children:"Environnement Lespass"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="tibillet-dev$"',children:"cp Lespass/env_example Lespass/.env\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Nom"}),(0,d.jsx)(n.th,{children:"Environnement cible"}),(0,d.jsx)(n.th,{children:"Nullable"}),(0,d.jsx)(n.th,{children:"Valeur par d\xe9faut"}),(0,d.jsx)(n.th,{children:"Notes"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SECRET_KEY"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Une des cl\xe9s secr\xe8tes Django g\xe9n\xe9r\xe9es pr\xe9c\xe9demment"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FERNET_KEY"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Une des cl\xe9s Fernet g\xe9n\xe9r\xe9es pr\xe9c\xe9demment"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_KEY"})}),(0,d.jsx)(n.td,{children:"Production"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Cl\xe9 API de votre compte Stripe"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DOMAIN"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"tibillet.localhost"})}),(0,d.jsx)(n.td,{children:"\xc0 adapter \xe0 votre nom de domaine en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SUB"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"lespass"})}),(0,d.jsx)(n.td,{children:"Sous-domaine de l'instance, \xe0 adapter en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"META"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"agenda"})}),(0,d.jsx)(n.td,{children:"Sous-domaine de l'agenda f\xe9d\xe9r\xe9, \xe0 adapter en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FEDOW_DOMAIN"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"fedow.tibillet.localhost"})}),(0,d.jsx)(n.td,{children:"Domaine et sous-domaine du moteur Fedow"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"PUBLIC"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"TiBillet Coop."}),(0,d.jsx)(n.td,{children:"Nom de l'instance principale"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TIME_ZONE"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"Europe/Paris"}),(0,d.jsx)(n.td,{children:"Plage horaire TZ de l'instance"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ADMIN_EMAIL"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Email administrateur (pour le\u22c5a premier\u22c5e admin)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POSTGRES_DB"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"lespass"}),(0,d.jsx)(n.td,{children:"\xc0 changer en production si n\xe9cessaire"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POSTGRES_USER"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"lespass_postgres"}),(0,d.jsx)(n.td,{children:"\xc0 changer en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POSTGRES_PASSWORD"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Mot de passe fort (une des cl\xe9s Fernets par exemple)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"EMAIL_HOST"}),", ",(0,d.jsx)(n.code,{children:"EMAIL_PORT"}),", ",(0,d.jsx)(n.code,{children:"EMAIL_HOST_USER"}),", ",(0,d.jsx)(n.code,{children:"EMAIL_HOST_PASSWORD"})]}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Serveur d'email, requis pour confirmer des abonn\xe9\u22c5es par exemple"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_KEY_TEST"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Cl\xe9 API de test de votre compte Stripe"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"STRIPE_TEST"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsxs)(n.td,{children:["Passer \xe0 1 si ",(0,d.jsx)(n.code,{children:"STRIPE_KEY_TEST"})," est rempli"]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DEBUG"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour le d\xe9veloppement"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TEST"})}),(0,d.jsx)(n.td,{children:"Tests"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour les tests"})]})]})]}),"\n",(0,d.jsx)(n.h4,{id:"environnement-laboutik",children:"Environnement LaBoutik"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="tibillet-dev$"',children:"cp LaBoutik/env_example LaBoutik/.env\n"})}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Nom"}),(0,d.jsx)(n.th,{children:"Environnement cible"}),(0,d.jsx)(n.th,{children:"Nullable"}),(0,d.jsx)(n.th,{children:"Valeur par d\xe9faut"}),(0,d.jsx)(n.th,{children:"Notes"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SECRET_KEY"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Une des cl\xe9s secr\xe8tes Django g\xe9n\xe9r\xe9es pr\xe9c\xe9demment"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FERNET_KEY"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Une des cl\xe9s Fernet g\xe9n\xe9r\xe9es pr\xe9c\xe9demment"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DOMAIN"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"laboutik.tibillet.localhost"})}),(0,d.jsx)(n.td,{children:"\xc0 adapter \xe0 votre nom de domaine et sous-domaine en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"FEDOW_URL"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"https://fedow.tibillet.localhost/",children:"https://fedow.tibillet.localhost/"})}),(0,d.jsx)(n.td,{children:"URL du moteur Fedow"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"LESPASS_TENANT_URL"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.a,{href:"https://lespass.tibillet.localhost/",children:"https://lespass.tibillet.localhost/"})}),(0,d.jsx)(n.td,{children:"URL de l'instance Lespass"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TIME_ZONE"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"Europe/Paris"}),(0,d.jsx)(n.td,{children:"Plage horaire TZ de l'instance"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"ADMIN_EMAIL"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Email administrateur (pour le\u22c5a premier\u22c5e admin)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"MAIN_ASSET_NAME"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Le nom de votre unit\xe9 de valeur cashless (Pi\xe9cette, CoeurDor\u2026 comme vous voulez)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POSTGRES_DB"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"laboutik"}),(0,d.jsx)(n.td,{children:"\xc0 changer en production si n\xe9cessaire"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POSTGRES_USER"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"laboutik_user"}),(0,d.jsx)(n.td,{children:"\xc0 changer en production"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"POSTGRES_PASSWORD"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Mot de passe fort (une des cl\xe9s Fernets par exemple)"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"EMAIL_HOST"}),", ",(0,d.jsx)(n.code,{children:"EMAIL_PORT"}),", ",(0,d.jsx)(n.code,{children:"EMAIL_HOST_USER"}),", ",(0,d.jsx)(n.code,{children:"EMAIL_HOST_PASSWORD"})]}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Serveur d'email, requis pour confirmer des abonn\xe9\u22c5es par exemple"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"BORG_PASSPHRASE"})}),(0,d.jsx)(n.td,{children:"Tous"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Mot de passe utilis\xe9 pour la sauvegarde des donn\xe9es"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DEBUG"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour le d\xe9veloppement"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"TEST"})}),(0,d.jsx)(n.td,{children:"Tests"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour les tests"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"DEMO"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Non"}),(0,d.jsx)(n.td,{children:"0"}),(0,d.jsx)(n.td,{children:"Passer \xe0 1 pour une simulation de terminal de caisse"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"SENTRY_DNS"})}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Sentry Debug pour le back-end"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"SENTRY_FRONT_DNS"}),", ",(0,d.jsx)(n.code,{children:"SENTRY_FRONT_ASSET"})]}),(0,d.jsx)(n.td,{children:"D\xe9veloppement, Tests"}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Sentry Debug pour le front-end"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"DEMO_TAGID_CM"}),", ",(0,d.jsx)(n.code,{children:"DEMO_TAGID_CLIENT1"}),", ",(0,d.jsx)(n.code,{children:"DEMO_TAGID_CLIENT2"})]}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Oui"}),(0,d.jsx)(n.td,{}),(0,d.jsx)(n.td,{children:"Aucune id\xe9e"})]})]})]}),"\n",(0,d.jsx)(n.p,{children:"La configuration devrait \xeatre maintenant compl\xe8te pour les trois moteurs."}),"\n",(0,d.jsx)(n.h3,{id:"le-dossier-test-driven-development",children:"Le dossier Test Driven Development"}),"\n",(0,d.jsx)(n.p,{children:"On peut lancer tout notre environnement depuis le d\xe9pot des tests."}),"\n",(0,d.jsx)(n.p,{children:"L'installation est similaire aux moteurs :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="tibillet-dev$"',children:"git clone git@github.com:TiBillet/Test-Driven-Development.git\ncp Test-Driven-Development/env_example Test-Driven-Development/.env\n"})}),"\n",(0,d.jsx)(n.p,{children:"C'est fait \u263a\ufe0f On peut maintenant conteneuriser l'application enti\xe8re depuis le dossier des tests."}),"\n",(0,d.jsx)(n.p,{children:"Ce dernier contient un conteneur suppl\xe9mentaire : Traefik."}),"\n",(0,d.jsx)(n.p,{children:"C'est un reverse proxy. Il permet permet de router les requetes https en direction des conteneurs."}),"\n",(0,d.jsx)(n.h2,{id:"d\xe9marrage-des-moteurs",children:"D\xe9marrage des moteurs"}),"\n",(0,d.jsx)(n.admonition,{type:"warning",children:(0,d.jsx)(n.p,{children:"Si vous avez t\xe9l\xe9charg\xe9 le dossier pr\xeat \xe0 installer, pensez \xe0 faire un git pull dans chacun des 4 d\xe9pots avant de lancer !"})}),"\n",(0,d.jsx)(n.p,{children:"Lancement des moteurs depuis le d\xe9pot des tests :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="Test-Driven-Development$"',children:"docker network create frontend # uniquement la premi\xe8re fois, c'est un r\xe9seau virtuel utilis\xe9 par Traefik.\ndocker compose up -d # Le premier lancement peut \xeatre long, il t\xe9l\xe9charge et construit toute les images.\n"})}),"\n",(0,d.jsx)(n.p,{children:"Vous pouvez acc\xe9der en prime aux logs avec la commande :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="Test-Driven-Development$"',children:"docker compose logs -f\n"})}),"\n",(0,d.jsx)(n.p,{children:"Pour supprimer les conteneurs :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="Test-Driven-Development$"',children:"docker compose down -v # -v pour les volumes utilis\xe9s par les bases de donn\xe9es.\n"})}),"\n",(0,d.jsx)(n.admonition,{title:"Attention",type:"warning",children:(0,d.jsxs)(n.p,{children:["Ce ",(0,d.jsx)(n.code,{children:"docker-compose.yml"})," en particulier s'appuie sur la structure d\xe9crite au d\xe9but de l'installation, donc sur la structure du dossier ",(0,d.jsx)(n.em,{children:"parent"})," aux tests, appel\xe9 pour l'exemple ",(0,d.jsx)(n.code,{children:"tibillet-dev"}),". Contre-intuitif, mais maintenant vous savez \ud83d\ude09"]})}),"\n",(0,d.jsxs)(n.p,{children:["La principale diff\xe9rence entre les conteneurs de dev et de prod, c'est qu'en dev la commande ",(0,d.jsx)(n.code,{children:"docker compose up"})," ne d\xe9marre pas les applications Django individuelles. C'est un niveau de contr\xf4le fin qui est utile pour le d\xe9veloppement, mais \xe7a veut dire que vous avez besoin de les lancer manuellement."]}),"\n",(0,d.jsx)(n.p,{children:"On va les lancer de pr\xe9f\xe9rence dans l'ordre :"}),"\n",(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"Fedow"}),"\n",(0,d.jsx)(n.li,{children:"Lespass"}),"\n",(0,d.jsx)(n.li,{children:"LaBoutik (qui a besoin des deux autres pour fonctionner)"}),"\n"]}),"\n",(0,d.jsxs)(n.p,{children:["Les outils dont on a besoin sont dans les conteneurs, nomm\xe9s d'apr\xe8s leur moteur : ",(0,d.jsx)(n.code,{children:"fedow_django"}),", ",(0,d.jsx)(n.code,{children:"lespass_django"})," et enfin ",(0,d.jsx)(n.code,{children:"laboutik_django"}),". Pour rentrer dans un conteneur (exemple avec Fedow) :"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",children:"# on d\xe9marre un environnement bash dans le conteneur fedow_django\ndocker exec -ti fedow_django bash\n"})}),"\n",(0,d.jsx)(n.p,{children:"\xc0 partir de l\xe0, on a quelques options."}),"\n",(0,d.jsxs)(n.p,{children:["La premi\xe8re, c'est le script ",(0,d.jsx)(n.code,{children:"flush.sh"}),". Il initialise les donn\xe9es de test et d\xe9marre Django dans la foul\xe9e. C'est cette commande qu'on va utiliser au ",(0,d.jsx)(n.strong,{children:"premier d\xe9marrage"})," de notre application :"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="fedow_django$"',children:"./flush.sh\n"})}),"\n",(0,d.jsxs)(n.p,{children:["On l'utilisera aussi quand on veut ",(0,d.jsx)(n.strong,{children:"r\xe9initialiser"})," les donn\xe9es, par exemple avant de lancer les tests automatis\xe9s qui ont besoin de ces donn\xe9es pr\xe9visibles."]}),"\n",(0,d.jsx)(n.p,{children:"Pour le reste des manipulation dans le conteneur, on a besoin de rentrer dans l'environnement de Poetry, car on va lancer du Python."}),"\n",(0,d.jsx)(n.p,{children:"Pour lancer l'environnement virtuel de Poetry depuis le conteneur :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="fedow_django$"',children:" # on d\xe9marre l'environnement virtuel qui prend en charge les d\xe9pendances python\npoetry shell\n"})}),"\n",(0,d.jsxs)(n.p,{children:["Django se g\xe8re avec un script appel\xe9 ",(0,d.jsx)(n.code,{children:"manage.py"}),". Deux commandes nous int\xe9ressent \xe0 l'heure actuelle :"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"rsp"})," (alias de  ",(0,d.jsx)(n.code,{children:"./manage.py runserver 0.0.0.0:8000"}),") d\xe9marre Django sans r\xe9initialiser les donn\xe9es. \xc7a nous servira quand on veut garder des donn\xe9es entre deux d\xe9marrages. G\xe9n\xe9ralement, si on a pas besoin de lancer les tests, c'est cette commande qu'on utilise plut\xf4t que ",(0,d.jsx)(n.code,{children:"flush"}),"."]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["Optionnellement, si on a des bugs graphiques, on peut tenter ",(0,d.jsx)(n.code,{children:"./manage.py collectstatic"}),". Parfois, les ressources graphiques ne sont pas correctement copi\xe9es au premier d\xe9marrage, et \xe7a peut r\xe9gler le probl\xe8me."]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Plus qu'\xe0 d\xe9marrer les trois moteurs de TiBillet dans l'ordre indiqu\xe9 pr\xe9c\xe9demment : Fedow, Lespass, puis LaBoutik !"}),"\n",(0,d.jsxs)(n.admonition,{title:"Cr\xe9ation d'alias",type:"tip",children:[(0,d.jsx)(n.p,{children:"La commande Docker devient vite r\xe9p\xe9titive. Pourquoi ne pas cr\xe9er un alias, ou m\xeame une petite fonction bash pour gagner du temps et soulager son canal carpien par la m\xeame occasion ? Voil\xe0 ma fonction :"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="~/.bashrc"',children:"function dockex {\n    docker exec -ti $1 bash\n}\n"})}),(0,d.jsx)(n.p,{children:"Il suffit d'ouvrir un nouveau terminal pour que la fonction s'ajoute \xe0 l'environnement. Il y a m\xeame sans doule moyen d'ajouter poetry \xe0 tout \xe7a si vous cherchez un peu !"})]}),"\n",(0,d.jsx)(n.h3,{id:"\xe7a-tourne-",children:"\xc7a tourne ?"}),"\n",(0,d.jsx)(n.p,{children:"Si vous avez utilis\xe9 la configuration des sous-domaines par d\xe9faut, vous avez maintenant acc\xe8s :"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["au moteur de f\xe9d\xe9ration Fedow sur ",(0,d.jsx)(n.a,{href:"https://fedow.tibillet.localhost",children:"fedow.tibillet.localhost"}),","]}),"\n",(0,d.jsxs)(n.li,{children:["\xe0 une instance du moteur de billetterie Lespass sur ",(0,d.jsx)(n.a,{href:"https://lespass.tibillet.localhost",children:"lespass.tibillet.localhost"}),","]}),"\n",(0,d.jsxs)(n.li,{children:["au serveur de caisse LaBoutik sur ",(0,d.jsx)(n.a,{href:"https://laboutik.tibillet.localhost",children:"laboutik.tibillet.localhost"})," pour l'admin. Cliquez sur \"voir le site\" pour lancer la simulation d'un terminal."]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:"Si tout marche comme pr\xe9vu, f\xe9licitations : vous \xeates pr\xeat\u22c5es \xe0 vous lancer \ud83d\udd27"}),"\n",(0,d.jsx)(n.p,{children:"Sinon, venez nous en parler, on est l\xe0 pour aider !"}),"\n",(0,d.jsxs)(n.admonition,{title:"Pour conclure",type:"note",children:[(0,d.jsxs)(n.p,{children:["N'oubliez pas de ",(0,d.jsx)(n.code,{children:"docker compose down"})," \xe0 la fois dans les tests et dans Trafik quand vous avez fini votre session de travail. Votre ordinateur aussi a besoin de faire des pauses !"]}),(0,d.jsxs)(n.p,{children:["Si vous avez peur de ne pas vous en souvenir, enlevez l'option ",(0,d.jsx)(n.code,{children:"-d"})," \xe0 ",(0,d.jsx)(n.code,{children:"compose up"})," et la commande se lancera directement dans le terminal, pas en t\xe2che de fond. C'est pas grave, vous aurez juste besoin de plus d'onglets \ud83d\ude0b"]})]}),"\n",(0,d.jsx)(n.h2,{id:"cycle-de-vie",children:"Cycle de vie"}),"\n",(0,d.jsx)(n.h3,{id:"mises-\xe0-jour",children:"Mises \xe0 jour"}),"\n",(0,d.jsx)(n.p,{children:"Pour rester \xe0 jour durant le d\xe9veloppement, pensez \xe0 t\xe9l\xe9charger les images les plus r\xe9cente et/ou \xe0 builder les images django :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="Test-Driven-Development$"',children:"docker compose pull\ndocker compose up -d --build # d\xe9marrer ou red\xe9marrer les conteneurs\n"})}),"\n",(0,d.jsx)(n.h3,{id:"tests",children:"Tests"}),"\n",(0,d.jsx)(n.p,{children:"Vous pouvez lancer les tests Python de la m\xeame fa\xe7on que pour un d\xe9marrage manuel. Commencez par r\xe9initialiser les trois app Django pour obtenir les donn\xe9es testables, puis lancez cette commande depuis votre conteneur Django LaBoutik :"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-bash",metastring:'title="laboutik_django> poetry shell$"',children:"./manage.py test\n"})}),"\n",(0,d.jsx)("mark",{children:"TODO: docs des tests end-to-end (ils existent !)"}),"\n",(0,d.jsx)(n.h3,{id:"sauvegardes",children:"Sauvegardes"}),"\n",(0,d.jsxs)(n.p,{children:["Avant de vous attaquer \xe0 un changement majeur, sauvegardez toute donn\xe9e qui a de la valeur pour votre d\xe9veloppement. Sur votre instance Fedow, par exemple, il suffit de sauvegarder le dossier ",(0,d.jsx)(n.code,{children:"database"})," r\xe9guli\xe8rement. Les autres moteurs peuvent \xeatre sauvegard\xe9s par l'utilitaire Borgbackup, des t\xe2ches cron et des dump de bases de donn\xe9es. Plus sur ce sujet \xe0 l'avenir."]}),"\n",(0,d.jsx)("mark",{children:"TODO: explications d\xe9taill\xe9es"})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(6540);const d={},i=r.createContext(d);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);